#!/bin/sh
set -e

# Update installed packages
sudo apt-get update
sudo apt-get -y upgrade

# Install virtualbox additions
install-virtualbox-guest

# Install skype
sudo dpkg -i Downloads/skype-*_i386.deb || true
sudo apt-get -f -y install

# Stop miredo
sudo /etc/init.d/miredo stop

# Configure and start aiccu
sudo cp ~/tmp/aiccu.conf /etc
sudo /etc/init.d/aiccu restart

# Set gksu to sudo mode
# http://ciffer.net/~svend/blog/entry/Gnome_administration_with_user_password/
sudo update-alternatives --set libgksu-gconf-defaults /usr/share/libgksu/debian/gconf-defaults.libgksu-sudo
sudo update-gconf-defaults

# Restart gdm (to get full resolution with vbox additions)
sudo /etc/init.d/gdm3 restart

# Use emacs-snapshot
sudo update-alternatives --set emacsclient /usr/bin/emacsclient.emacs-snapshot
sudo update-alternatives --set emacs /usr/bin/emacs-snapshot
